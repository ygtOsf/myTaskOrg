<apex:page StandardController="Account" extensions="accountDetailsController">
    <apex:form >
        <apex:pageBlock title="Account Primary Contact">
            <apex:pageMessages id="showmsg"></apex:pageMessages>
            <apex:pageBlockSection >
                <apex:inputField value="{!account.Name }" required="true"/>
                <apex:inputField value="{!account.AccountNumber}" required="true"/>
                <apex:inputField value="{!account.Type }"/>
                <apex:inputField value="{!account.Active__c }"/>
                <apex:inputField value="{!account.Phone }" required="true"/>
                <apex:inputField value="{!account.Fax }"/>
            </apex:pageBlockSection>
            <apex:pageBlockButtons >
                <apex:commandButton action="{!save}"   value="Save"  />
                <apex:commandButton action="{!cancel}" value="Cancel" />
            </apex:pageBlockButtons>
        </apex:pageBlock>
        <apex:pageBlock title="Search Related Contacts">
            <apex:inputText value="{!searchKey}" label="Input"/>
            <apex:commandButton value="Search" action="{!search}"/>
        </apex:pageBlock>
        <apex:pageBlock title="Related Contacts" id="relatedContacts">
            <apex:pageBlockTable value="{!contacts}" var="contact">
                <apex:column value="{!contact.name}"/>
                <apex:column value="{!contact.Title}"/>
                <apex:column value="{!contact.Phone}"/>
                <apex:column value="{!contact.Is_Primary_Contact__c}" id="Ä±sPrimary"/>
                <apex:column >
                    <apex:outputLink onclick="doConfirm('{!contact.Id}'); return false;" > Set As Primary </apex:outputLink> 
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlock> 
        <apex:actionFunction action="{!setPrimaryContact}" name="methodContactsInJavaScript" reRender="relatedContacts">
            <apex:param name="setPrimaryContactParam" value="" />
        </apex:actionFunction>
    </apex:form>
        <script>
        function doConfirm(id) {
            if(confirm ("Are you sure want to complete?")){
                return methodContactsInJavaScript(id);   
            }
        }
        </script>
</apex:page>